<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>الصحافة الذكية</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#f0f2f5;
    direction:rtl;
}

header{
    background:#001122;
    color:white;
    padding:15px;
    text-align:center;
    font-weight:bold;
}

#news-feed{
    max-width:600px;
    margin:20px auto;
    padding:10px;
}

.card{
    background:white;
    margin-bottom:20px;
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 4px 10px rgba(0,0,0,.1);
}

.card img{
    width:100%;
    height:250px;
    object-fit:cover;
}

.card h3{
    padding:10px;
    font-size:16px;
}
</style>
</head>
<body>

<header>الصحافة الذكية</header>

<div id="news-feed">
تحميل...
</div>

<script>

const JSON_URL = "https://raw.githubusercontent.com/marocnetmail/125/main/data/data_fusionnee.json";
const IMAGE_BASE = "https://raw.githubusercontent.com/marocnetmail/125/main/images/img05/";

async function loadNews(){
    const container = document.getElementById("news-feed");

    try{
        const res = await fetch(JSON_URL);
        const data = await res.json();

        container.innerHTML = "";

        data.slice(0,10).forEach(item => {

            // ⚠️ IMPORTANT : vérifier si id existe
            if(!item.id) return;

            const imgUrl = IMAGE_BASE + item.id + ".jpg";

            const card = document.createElement("div");
            card.className = "card";

            card.innerHTML = `
                <img src="${imgUrl}"
                     loading="lazy"
                     onerror="this.src='https://via.placeholder.com/600x400?text=Image+Non+Disponible'">
                <h3>${item.titre || item.title || "Sans titre"}</h3>
            `;

            container.appendChild(card);
        });

    }catch(e){
        container.innerHTML = "❌ Erreur chargement JSON";
        console.error(e);
    }
}

loadNews();

</script>

</body>
</html>
